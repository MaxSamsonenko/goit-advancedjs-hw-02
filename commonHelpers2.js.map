{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n//access the elements on page\nconst minutesEl = document.querySelector('[data-minutes]');\nconst daysEl = document.querySelector('[data-days]');\nconst hoursEl = document.querySelector('[data-hours]');\nconst secondsEl = document.querySelector('[data-seconds]');\nconst input = document.getElementById('datetime-picker');\nconst startBtn = document.querySelector('[data-start]');\n//add disabled attribute to button\nstartBtn.setAttribute('disabled', 'true');\n\nstartBtn.addEventListener('click', startBtnHandler);\n//variables to store date selected in milliseconds and interval id\nlet selectedTime;\nlet intervalId;\n\n//start button handler\nfunction startBtnHandler() {\n  startBtn.setAttribute('disabled', 'true');\n  input.setAttribute('disabled', 'true');\n  intervalId = setInterval(() => {\n    updateTimer(selectedTime);\n  }, 1000);\n}\n//iziToast options\nconst message = {\n  title: 'Error',\n  message: 'Please choose a date in the future',\n  titleColor: '#ffffff',\n  messageColor: '#ffffff',\n  backgroundColor: 'rgb(231, 39, 39)',\n  theme: 'light',\n  position: 'topCenter',\n};\n//flatpicker options\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const currentTime = new Date();\n    if (selectedDates[0].getTime() > currentTime.getTime()) {\n      startBtn.removeAttribute('disabled');\n      selectedTime = selectedDates[0].getTime();\n      return;\n    }\n    iziToast.show(message);\n  },\n};\nfunction updateTimer(targetDate) {\n  // Get the current date and time in milliseconds\n  const currentDate = new Date().getTime();\n  // Calculate the time remaining in milliseconds\n  const timeRemaining = targetDate - currentDate;\n  // stop countdown if reached zero\n  if (timeRemaining <= 0) {\n    clearInterval(intervalId);\n    input.removeAttribute('disabled');\n    return;\n  }\n  // Calculate days, hours, minutes, and seconds from timeRemaining\n  const { days, hours, minutes, seconds } = convertMs(timeRemaining);\n  // Update the timer elements with the calculated values\n  daysEl.textContent = addLeadingZero(days);\n  hoursEl.textContent = addLeadingZero(hours);\n  minutesEl.textContent = addLeadingZero(minutes);\n  secondsEl.textContent = addLeadingZero(seconds);\n}\n\nflatpickr('#datetime-picker', options);\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n//add leading zeros to the timer values\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}\n"],"names":["minutesEl","daysEl","hoursEl","secondsEl","input","startBtn","startBtnHandler","selectedTime","intervalId","updateTimer","message","options","selectedDates","currentTime","iziToast","targetDate","currentDate","timeRemaining","days","hours","minutes","seconds","convertMs","addLeadingZero","flatpickr","ms","value"],"mappings":"+IAKA,MAAMA,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAQ,SAAS,eAAe,iBAAiB,EACjDC,EAAW,SAAS,cAAc,cAAc,EAEtDA,EAAS,aAAa,WAAY,MAAM,EAExCA,EAAS,iBAAiB,QAASC,CAAe,EAElD,IAAIC,EACAC,EAGJ,SAASF,GAAkB,CACzBD,EAAS,aAAa,WAAY,MAAM,EACxCD,EAAM,aAAa,WAAY,MAAM,EACrCI,EAAa,YAAY,IAAM,CAC7BC,EAAYF,CAAY,CACzB,EAAE,GAAI,CACT,CAEA,MAAMG,EAAU,CACd,MAAO,QACP,QAAS,qCACT,WAAY,UACZ,aAAc,UACd,gBAAiB,mBACjB,MAAO,QACP,SAAU,WACZ,EAEMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAc,IAAI,KACxB,GAAID,EAAc,GAAG,QAAO,EAAKC,EAAY,UAAW,CACtDR,EAAS,gBAAgB,UAAU,EACnCE,EAAeK,EAAc,GAAG,QAAO,EACvC,MACD,CACDE,EAAS,KAAKJ,CAAO,CACtB,CACH,EACA,SAASD,EAAYM,EAAY,CAE/B,MAAMC,EAAc,IAAI,KAAM,EAAC,QAAO,EAEhCC,EAAgBF,EAAaC,EAEnC,GAAIC,GAAiB,EAAG,CACtB,cAAcT,CAAU,EACxBJ,EAAM,gBAAgB,UAAU,EAChC,MACD,CAED,KAAM,CAAE,KAAAc,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAa,EAEjEhB,EAAO,YAAcsB,EAAeL,CAAI,EACxChB,EAAQ,YAAcqB,EAAeJ,CAAK,EAC1CnB,EAAU,YAAcuB,EAAeH,CAAO,EAC9CjB,EAAU,YAAcoB,EAAeF,CAAO,CAChD,CAEAG,EAAU,mBAAoBb,CAAO,EAErC,SAASW,EAAUG,EAAI,CAQrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EAEpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASE,EAAeG,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC"}